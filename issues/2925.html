<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Bug #2925: Samba access denied from second green network - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="xe6SsSoVbaoZlAUezNss16xDC6ajg3P6jzWUrXbVg4A=" name="csrf-token" />
<link rel='shortcut icon' href='../favicon.ico%3F1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057.css" media="all" rel="stylesheet" type="text/css" />
<link href="../themes/nethserver/stylesheets/application.css%3F1403512057.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver/javascripts/theme.js%3F1403512057.js" type="text/javascript"></script>
<link href="../plugin_assets/openid_fix/stylesheets/openid.css%3F1403512057.css" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/2925.atom" rel="alternate" title="NethServer 6 - Bug #2925: Samba access denied from second green network" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057.css" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    
    <ul><li><a href="/index.html" class="home">Home</a></li>
<li><a href="/projects.html" class="projects">Projects</a></li></ul></div>
<div id="header">
    
<h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>

<li><a href="../issues.html" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki.html" class="wiki">Wiki</a></li></ul>
    </div>
</div>

<div id="main" class="">
    

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Bug #2925</h2>

<div class="issue tracker-1 status-5 priority-4 priority-default closed details">
    <div class="next-prev-links contextual">
      <a href="2926.html" title="#2926">« Previous</a> |
      <a href="2904.html" title="#2904">Next »</a>
    </div>

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/541ee3a2fa916bc906fc9473c9937027?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Samba access denied from second green network</h3></div>
</div>
        <p class="author">
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-samba</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../versions/201.html">v6.5</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_15">Security class:</th><td class="cf_15"></td>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
</tr>
<tr>
	<th class="cf_1">Affected version:</th><td class="cf_1"><a href="../versions/201.html">v6.5</a></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>On a NethSever with two green network I can't access on samba folders from second green network.<br />The error is access denied.<br />My configuration</p>


	<p>green: 192.168.5.0/255.255.255.0 <br />green2: 192.168.10.0/255.255.255.0</p>


	<p>My smb.conf</p>


	<p>[global]<br />log level = 0<br />bind interfaces only = yes<br />interfaces = 127.0.0.1 192.168.5.0/24<br />hosts allow = 127.0.0.1 192.168.5.0/255.255.255.0 192.168.10.0/255.255.255.0</p>


	<p>Steps to reproduce:</p>


	<p>- configure NehServer with two green interface<br />- configure a shared samba folder<br />- try to access to shared samba folder from a client connected from second green interface</p>


	<p>Suggest Fix :</p>


	<p>- in smb.conf the prop interfaces can be emptied, samba will be active in all interface and the firewall module checks the access</p>
  </div>
</div>






</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <div class="wiki">
        <p>smb.conf template: bind on all green interfaces. Refs <a href="2925.html" class="issue tracker-1 status-5 priority-4 priority-default closed" title="Samba access denied from second green network (CLOSED)">#2925</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-12766" class="journal has-details">
    <div id="note-1">
    <h4><a href="2925.html#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>Target version</strong> set to <i>v6.5</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
       <li><strong>Affected version</strong> set to <i>v6.5</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-12791" class="journal has-details">
    <div id="note-2">
    <h4><a href="2925.html#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-12792" class="journal has-notes has-details">
    <div id="note-3">
    <h4><a href="2925.html#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-12792-notes"><p>New implementation expands <code>interfaces</code> option to all green interfaces.</p>


	<p>About <code>interfaces</code> option from the man page of smb.conf:<br /><pre>
 By default Samba enables all active interfaces that are broadcast capable except the loopback adaptor (IP address 127.0.0.1).
</pre></p>


	<p>And from online manual (<a class="external" href="https://www.samba.org/samba/docs/using_samba/ch06.html">https://www.samba.org/samba/docs/using_samba/ch06.html</a>):<br /><pre>
The interfaces option specifies the networks that you want the Samba server to recognize and respond to. 
This option is handy if you have a computer that resides on more than one network subnet. 
If this option is not set, Samba searches for the primary network interface of the server (typically the first Ethernet card) 
upon startup and configures itself to operate on only that subnet. If the server is configured for more than one subnet and 
you do not specify this option, Samba will only work on the first subnet it encounters. You must use this option to force 
Samba to serve the other subnets on your network.
</pre></p></div>
    </div>
  </div>
  
  <div id="change-12793" class="journal has-notes has-details">
    <div id="note-4">
    <h4><a href="2925.html#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-12793-notes">In nethserver-testing:
	<ul>
	<li>nethserver-samba-1.4.6-1.1git289aca9.ns6.noarch.rpm</li>
	</ul>


<strong>Test case 1</strong>
	<ul>
	<li>Check the daemon still works on systems with only one green interface</li>
	</ul>


<strong>Test case 2</strong>
	<ul>
	<li>Check the bug is not reproducible with two or more green interfaces</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-13000" class="journal has-details">
    <div id="note-5">
    <h4><a href="2925.html#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/121525e7aade0b89bb075d344e416550?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Assignee</strong> set to <i>Alessandro Polidori</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13004" class="journal has-notes has-details">
    <div id="note-6">
    <h4><a href="2925.html#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/121525e7aade0b89bb075d344e416550?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Alessandro Polidori</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    <div class="wiki" id="journal-13004-notes"><ol>
	<li>Test case 1 verified, it works.</li>
	</ol>


	<ol>
	<li>Test case 2 verified, it works.</li>
	</ol>


	<p>I tested it with two and four green networks:<br />green: 192.168.5.250/255.255.255.0 <br />green2: 192.168.10.250/255.255.255.0<br />green3: 192.168.20.250/255.255.255.0<br />green4: 192.168.30.250/255.255.255.0</p>


	<p>The shared folder is accessible from all of four network interfaces.</p></div>
    </div>
  </div>
  
  <div id="change-13078" class="journal has-notes has-details">
    <div id="note-7">
    <h4><a href="2925.html#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-13078-notes"><p>In nethserver-updates:<br />nethserver-samba-1.4.7-1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>





<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright &copy; 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
