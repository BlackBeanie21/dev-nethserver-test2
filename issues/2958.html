<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Enhancement #2958: squidGuard: support multiple profiles - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="xe6SsSoVbaoZlAUezNss16xDC6ajg3P6jzWUrXbVg4A=" name="csrf-token" />
<link rel='shortcut icon' href='../favicon.ico%3F1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057.css" media="all" rel="stylesheet" type="text/css" />
<link href="../themes/nethserver/stylesheets/application.css%3F1403512057.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver/javascripts/theme.js%3F1403512057.js" type="text/javascript"></script>
<link href="../plugin_assets/openid_fix/stylesheets/openid.css%3F1403512057.css" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/2958.atom" rel="alternate" title="NethServer 6 - Enhancement #2958: squidGuard: support multiple profiles" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057.css" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    
    <ul><li><a href="/index.html" class="home">Home</a></li>
<li><a href="/projects.html" class="projects">Projects</a></li></ul></div>
<div id="header">
    
<h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>

<li><a href="../issues.html" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki.html" class="wiki">Wiki</a></li></ul>
    </div>
</div>

<div id="main" class="">
    

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Enhancement #2958</h2>

<div class="issue tracker-6 status-5 priority-4 priority-default closed details">
    <div class="next-prev-links contextual">
      <a href="2866.html" title="#2866">« Previous</a> |
      <a href="2959.html" title="#2959">Next »</a>
    </div>

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>squidGuard: support multiple profiles</h3></div>
</div>
        <p class="author">
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-squidguard</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../versions/201.html">v6.5</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">Yes</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Add support for multiple profiles inside squidGuard.</p>


Following features should be implemented:
	<ul>
	<li>creation of multiple profile: each profile can contain a list of allowed/blocked categories</li>
		<li>a profile can be associated to an object; permitted objects are:
	<ul>
	<li>user</li>
		<li>user group</li>
		<li>host</li>
		<li>host group</li>
	</ul>
	</li>
		<li>a profile can also be associated to a specific timeframe</li>
	</ul>
  </div>
</div>





<hr />
<div id="relations">
<div class="contextual">
</div>

<p><strong>Related issues</strong></p>

<form>
<table class="list issues">
  <tr class="issue hascontextmenu" id="relation-658">
  <td class="checkbox"><input name="ids[]" type="checkbox" value="2967" /></td>
  <td class="subject">
    Related to
    
    NethServer 6 - 
    <a href="2967.html" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2967</a>: Transparent proxy: switch iplementation from TPROXY to RE...
  </td>
  <td class="status">CLOSED</td>
  <td class="start_date"></td>
  <td class="due_date"></td>
  <td class="buttons"></td>
  </tr>
</table>
</form>

<form accept-charset="UTF-8" action="http://dev.nethserver.org/issues/2958/relations" class="new_relation" data-remote="true" id="new-relation-form" method="post" style="display: none;"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="xe6SsSoVbaoZlAUezNss16xDC6ajg3P6jzWUrXbVg4A=" /></div>


<p><select id="relation_relation_type" name="relation[relation_type]" onchange="setPredecessorFieldsVisibility();"><option value="relates" selected="selected">Related to</option>
<option value="duplicates">Duplicates</option>
<option value="duplicated">Duplicated by</option>
<option value="blocks">Blocks</option>
<option value="blocked">Blocked by</option>
<option value="precedes">Precedes</option>
<option value="follows">Follows</option>
<option value="copied_to">Copied to</option>
<option value="copied_from">Copied from</option></select>
Issue #<input id="relation_issue_to_id" name="relation[issue_to_id]" size="10" type="text" />
<span id="predecessor_fields" style="display:none;">
Delay: <input id="relation_delay" name="relation[delay]" size="3" type="text" /> days
</span>
<input name="commit" type="submit" value="Add" />
<a href="2958.html#" onclick="$(&quot;#new-relation-form&quot;).hide();; return false;">Cancel</a>
</p>

<script type="text/javascript">
//<![CDATA[
observeAutocompleteField('relation_issue_to_id', '/issues/auto_complete?project_id=nethserver&scope=all')
//]]>
</script>

<script type="text/javascript">
//<![CDATA[
setPredecessorFieldsVisibility();
//]]>
</script>

</form>
</div>

</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <div class="wiki">
        <p>BlockIpAccess: default to enabled. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web interface: refactor for profile support. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: multiple-profile stub implemention. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web interface: refactor for profile support. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: add roles. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: rename classes. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: move BlockIpAccess inside filters. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: correctly handle comma-separated fields. Refs <a href="1984.html" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Content filter: add time table support (CLOSED)">#1984</a> <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: cosmetic changes. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>squidGuard.conf: add support for times and multi profile. Refs <a href="1984.html" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Content filter: add time table support (CLOSED)">#1984</a> <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: refactor black and white lists. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: add stronger validator. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a> <a href="1984.html" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Content filter: add time table support (CLOSED)">#1984</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>DB defaults: remove old properties. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: clean up code. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a> <a href="1984.html" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Content filter: add time table support (CLOSED)">#1984</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: add custom categories. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a>"</p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>scripts and templates: implement custom categories. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: execute events only when saving profiles. Refs <a href="1984.html" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Content filter: add time table support (CLOSED)">#1984</a> <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: handle categories with empty translation. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Fix log permission. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>custom-list: fix permission. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>squidGuard.conf template: use getent for group. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>custom list: fix permission. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>squidGuard.conf: remove 302 redirect. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>spec: fix genfile syntax. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>squidGuard.conf template: fix syntax. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>migratation fragment: correctly handle multiple runs. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>templates: block and log blacklist per-profile. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>squid.conf: skip url rewriter for localhost. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI, db defaults: add default filter and profile. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: add italian translation. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a> 1984</p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: always show black and white lists. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>db: migrate old configuration. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>default profile: add missing logic. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: default profile can't be edited. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: enable BlockIpAccess by default for new filters. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>createlinks: apply squidGuard config group-modify Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>


	<p>If proxy is in authenticated mode,<br />squidGuard needs to be notified if a group composition<br />has been changed.</p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: handle recursive caegories. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>update custom list: avoid unnecessary expand-template. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>createlinks: configure custom lists before invoking squidGuard. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>squidGuard.conf: handle recursive categories. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>squidGuard.conf: fix default profile. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: fire event on delete. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a> <a href="1984.html" class="issue tracker-2 status-5 priority-4 priority-default closed" title="Content filter: add time table support (CLOSED)">#1984</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: fix whitelist handling. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Logorate: rotate urlfilter.log. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Inline help: add English and Italian. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Inline help: add English and Italian. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: always show hosts and users in profile tab. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Web UI: format profile table. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Web UI: add support for AD users. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>config template: avoid warnings. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>config template: allow Active Directory users.  Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Enhance Back button behaviour on Tabs widget. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Push initial URL fragment into browser history. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Imported NethServer template from nethserver-base package. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>


	<p>The new template is compatible with the Back button fix from Nethgui.</p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Merge branch 'master' into v6.6</p>


	<p>Import Back button fixes <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>


	<p>Conflicts:<br />    SHA1SUM<br />    nethserver-httpd-admin.spec</p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>squidGuard.conf: whitelist always wins. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>squidGuard.conf: whitelist always wins in profiles. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>squidGuard.conf: whitelist always wins in profiles. Refs <a href="2958.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="squidGuard: support multiple profiles (CLOSED)">#2958</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-13223" class="journal has-details">
    <div id="note-1">
    <h4><a href="2958.html#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>Target version</strong> set to <i>v6.5</i></li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13224" class="journal has-details">
    <div id="note-2">
    <h4><a href="2958.html#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13268" class="journal has-details">
    <div id="note-3">
    <h4><a href="2958.html#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13300" class="journal has-notes has-details">
    <div id="note-4">
    <h4><a href="2958.html#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_DEV</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>30</i></li>
    </ul>
    <div class="wiki" id="journal-13300-notes">SquidGuard can be redirect the client to the block page using two different ways:
	<ul>
	<li>returning back a 302 HTTP code, the client than takes care to do the new request</li>
		<li>faking the client and loading the block page then returning it back to the client</li>
	</ul>


	<p>See this document for more info: <a class="external" href="http://wiki.squid-cache.org/Features/Redirectors">http://wiki.squid-cache.org/Features/Redirectors</a></p>


	<p>First scenario has one major drawback: the client must always be allowed to access the block page. This isn't true if the block page has the IP address of the green interface and the client does requests from the blue network. Beside this, if the client can't access sites with IP addresses (squidGuard ip-addr acl), the browser is forced to an infinite loop.<br />The second scenario addresses above problems, but it doesn't work correctly with TPROXY because part of the TCP connection is made by the proxy itself, so the client can't display the block page.</p>


	<p>The best solution is to switch  to a transparent proxy implementation based on DNAT and use the second scenario for squidGuard configuration.</p></div>
    </div>
  </div>
  
  <div id="change-13306" class="journal has-details">
    <div id="note-5">
    <h4><a href="2958.html#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13307" class="journal has-details">
    <div id="note-6">
    <h4><a href="2958.html#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Related to</strong> <i><a href="2967.html" class="issue tracker-6 status-5 priority-4 priority-default closed">Enhancement #2967</a>: Transparent proxy: switch iplementation from TPROXY to REDIRECT</i> added</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13321" class="journal has-details">
    <div id="note-7">
    <h4><a href="2958.html#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13330" class="journal has-notes has-details">
    <div id="note-8">
    <h4><a href="2958.html#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-13330-notes">Packages in nethserver-testing:
	<ul>
	<li>nethserver-squidguard-1.0.5-36.0gitef146c2d.ns6.noarch.rpm</li>
		<li>nethserver-squid-1.2.0-18.0gitcfbd3944.ns6.noarch.rpm</li>
	</ul>


<strong>Test case 1: default profile</strong>
	<ul>
	<li>On a clean enable the proxy in transparent mode (or manual, but remember to configure the client)</li>
		<li>Configure a domain inside the black list and one inside the white list</li>
		<li>Check the client can access the one in white list and not the one in black list</li>
		<li>Check the client can't access sites using the IP address (blocked for default)</li>
	</ul>


<strong>Test case 2</strong>
	<ul>
	<li>Create a host with the IP address of the client you will use for tests</li>
		<li>Create a custom category with some domains</li>
		<li>Create a new filter and select the new category</li>
		<li>Select "Block all, allow selected content* option</li>
		<li>Create a new profile with the new host and the new filter</li>
		<li>Check the client can browse only sites inside the selected category</li>
	</ul>


<strong>Test case 3</strong>
	<ul>
	<li>Create a host with the IP address of the client you will use for tests</li>
		<li>Create a custom category with some domains</li>
		<li>Create a new filter and select the new category</li>
		<li>Select "Allow all, block selected content* option</li>
		<li>Create a new profile with the new host and the new filter</li>
		<li>Check the client can't browse sites inside the selected category</li>
	</ul>


<strong>Test case 4</strong>
	<ul>
	<li>Repeat test 3 enabling and disabling global white/black lists</li>
	</ul>


<strong>Test case 5</strong>
	<ul>
	<li>Configure the proxy as authenticated</li>
		<li>Repeat tests 2 and 3</li>
		<li>Remember to edit the profile and select a user in the "Who" field</li>
	</ul>


<strong>Test case 6</strong>
	<ul>
	<li>Free your imagination and try obscure and uncommon option combinations</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-13400" class="journal has-notes has-details">
    <div id="note-9">
    <h4><a href="2958.html#note-9" class="journal-link">#9</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>TRIAGED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>20</i></li>
    </ul>
    <div class="wiki" id="journal-13400-notes"><p>Fragment for default profile in sguidguard configuration is missing.</p></div>
    </div>
  </div>
  
  <div id="change-13402" class="journal has-details">
    <div id="note-10">
    <h4><a href="2958.html#note-10" class="journal-link">#10</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13415" class="journal has-details">
    <div id="note-11">
    <h4><a href="2958.html#note-11" class="journal-link">#11</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13416" class="journal has-notes">
    <div id="note-12">
    <h4><a href="2958.html#note-12" class="journal-link">#12</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13416-notes">Package in nethserver-testing:
	<ul>
	<li>nethserver-squidguard-1.0.5-52.0git8fceeac4.ns6.noarch.rpm</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-13417" class="journal has-details">
    <div id="note-13">
    <h4><a href="2958.html#note-13" class="journal-link">#13</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13460" class="journal has-notes">
    <div id="note-14">
    <h4><a href="2958.html#note-14" class="journal-link">#14</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13460-notes"><p>In squid.conf https port is 3130, but shorewall redirects to 3129.<br /><pre>
--- 90squid    2014-12-05 15:49:52.000000000 +0100
+++ /etc/e-smith/templates/etc/shorewall/rules/90squid    2014-12-04 20:02:19.230206865 +0100
@@ -64,7 +64,7 @@
             $OUT.="REDIRECT\tloc$bypass_src_str\t3129\ttcp\t80\t-\t$bypass_dst_str\n";
             if ($green_mode =~ /ssl/) {
                 $OUT .="?COMMENT transparent proxy on green for port 443\n";
-                $OUT.="REDIRECT\tloc$bypass_src_str\t3129\ttcp\t443\t-\t$bypass_dst_str\n";
+                $OUT.="REDIRECT\tloc$bypass_src_str\t3130\ttcp\t443\t-\t$bypass_dst_str\n";
             }

         }
@@ -84,7 +84,7 @@
             $OUT.="REDIRECT\tblue$bypass_src_str\t3129\ttcp\t80\t-\t$bypass_dst_str\n";
             if ($blue_mode =~ /ssl/) {
                 $OUT .="?COMMENT transparent proxy on blue for port 443\n";
-                $OUT.="REDIRECT\tloc$bypass_src_str\t3129\ttcp\t443\t-\t$bypass_dst_str\n";
+                $OUT.="REDIRECT\tloc$bypass_src_str\t3130\ttcp\t443\t-\t$bypass_dst_str\n";
             }
         }
     }
</pre></p></div>
    </div>
  </div>
  
  <div id="change-13461" class="journal has-notes">
    <div id="note-15">
    <h4><a href="2958.html#note-15" class="journal-link">#15</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13461-notes"><p>The block page always says: unknown category</p></div>
    </div>
  </div>
  
  <div id="change-13462" class="journal has-notes">
    <div id="note-16">
    <h4><a href="2958.html#note-16" class="journal-link">#16</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13462-notes"><blockquote>

	<p>In squid.conf https port is 3130, but shorewall redirects to 3129.</p>


</blockquote>

	<p>This is not related to this package.<br />I just added the same note to <a href="2967.html" class="issue tracker-6 status-5 priority-4 priority-default closed" title="Transparent proxy: switch iplementation from TPROXY to REDIRECT (CLOSED)">#2967</a></p></div>
    </div>
  </div>
  
  <div id="change-13465" class="journal has-notes">
    <div id="note-17">
    <h4><a href="2958.html#note-17" class="journal-link">#17</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13465-notes"><p>Filippo Carletti wrote:</p>


<blockquote>

	<p>The block page always says: unknown category</p>


</blockquote>

	<p>You should see something like:<br />Category: unknown blacklist</p>


	<p>The first <code>unknown</code> is the category for the source, and <code>blacklist</code> is the name of destination category.</p>


	<p>Please can you post the matching lines from <code>/var/log/squidGuard/urlfilter.log</code>?</p>


	<p>Maybe we can hide the <code>unknown</code> case.</p></div>
    </div>
  </div>
  
  <div id="change-13466" class="journal has-notes">
    <div id="note-18">
    <h4><a href="2958.html#note-18" class="journal-link">#18</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13466-notes"><blockquote>

	<p>Please can you post the matching lines from <code>/var/log/squidGuard/urlfilter.log</code>?</p>


</blockquote>

	<p>Nothing is looged.</p></div>
    </div>
  </div>
  
  <div id="change-13538" class="journal has-notes">
    <div id="note-19">
    <h4><a href="2958.html#note-19" class="journal-link">#19</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13538-notes">New package in nethserver-testing:
	<ul>
	<li>nethserver-squidguard-1.0.5-65.0git53e5aa9d.ns6.noarch.rpm</li>
	</ul>


<strong>Test case 7</strong>
	<ul>
	<li>Configure the proxy in authenticated mode</li>
		<li>Install nethserver-samba and join the server to an existing Active Directory</li>
		<li>Open the Profiles page and check AD users are listed</li>
		<li>Select a user from AD and and an associated filter</li>
		<li>Configure a client with the proxy in authenticated mode and try to login with AD user credentials</li>
		<li>Check the filter is applied</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-13602" class="journal has-notes">
    <div id="note-20">
    <h4><a href="2958.html#note-20" class="journal-link">#20</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13602-notes"><p>Fixed Back button issues in Tab widget.</p>


	<p>Added packages to nethserver-testing (6.5):<br />nethserver-base-2.5.4-2.0git488f170c.ns6.noarch.rpm<br />nethserver-httpd-admin-1.3.5-1.2git14f5ec1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  
  <div id="change-13631" class="journal has-notes has-details">
    <div id="note-21">
    <h4><a href="2958.html#note-21" class="journal-link">#21</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/c96c358beddd941e6188349f3c98ccd3?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>TRIAGED</i></li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>20</i></li>
    </ul>
    <div class="wiki" id="journal-13631-notes"><p>test case 1 : ok<br />test case 2 : ok but blocked sites are not logged on urlfilter.log (may be this is the normal behavior in this filtering mode)<br />test case 3 : ok<br />test case 4 : global whitelist override doesn't work (can't enable website access using the global whitelist)<br />test case 5: auth with local users: the authentications work, but I can't choose users when configuring profiles, just hosts and hosts groups</p></div>
    </div>
  </div>
  
  <div id="change-13639" class="journal has-notes has-details">
    <div id="note-22">
    <h4><a href="2958.html#note-22" class="journal-link">#22</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>NEEDINFO</strong> changed from <i>No</i> to <i>Yes</i></li>
    </ul>
    <div class="wiki" id="journal-13639-notes"><blockquote>

	<p>test case 2 : ok but blocked sites are not logged on urlfilter.log (may be this is the normal behavior in this filtering mode)</p>


</blockquote>

	<p>Yes, it is.</p>


<blockquote>

	<p>test case 4 : global whitelist override doesn't work (can't enable website access using the global whitelist)</p>


</blockquote>

	<p>What is the configuration? Can you paste the extract from <code>squidGuard.conf</code> and <code>contentfilter</code> db?</p>


	<p>With this configuration, if a site is inside a blocked category and inside the whitelist, the site is still blocked. Should the whitelist always win? Even over custom categories?<br /><pre>

[root@localhost ~]# db contentfilter show
blocked=category
    Description=
    Domains=www.nethesis.it
default=filter
    BlackList=enabled
    BlockAll=disabled
    BlockFileTypes=disabled
    BlockIpAccess=enabled
    Categories=blocked
    Description=Default filter
    Removable=no
    WhiteList=enabled
default_profile=profile
    Description=Default profile
    Filter=filter;default
    Removable=no
</pre></p>


	<p>Extract from squidGuard.conf:<br /><pre>
    default {
        pass !blocked  !in-addr  whitelist  !blacklist  all
        redirect     http://192.168.5.246/cgi-bin/nethserver-block.cgi?clientaddr=%a&#38;clientname=%n&#38;clientident=%i&#38;srcclass=%s&#38;targetgroup=%t&#38;url=%u
    }
</pre></p>


<blockquote>

	<p>test case 5: auth with local users: the authentications work, but I can't choose users when configuring profiles, just hosts and hosts groups</p>


</blockquote>

	<p>I can't reproduce the problem. Have you used the latest package? Current web interface always displays hosts and users, no matter how the proxy is configured.</p></div>
    </div>
  </div>
  
  <div id="change-13640" class="journal has-notes has-details">
    <div id="note-23">
    <h4><a href="2958.html#note-23" class="journal-link">#23</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>60</i></li>
    </ul>
    </div>
  </div>
  
  <div id="change-13644" class="journal has-notes">
    <div id="note-24">
    <h4><a href="2958.html#note-24" class="journal-link">#24</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/c96c358beddd941e6188349f3c98ccd3?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13644-notes"><blockquote>

	<p>What is the configuration? Can you paste the extract from squidGuard.conf and contentfilter db?</p>


</blockquote>

<pre>
[root@server ~]# db contentfilter show 
default=filter
    BlackList=enabled
    BlockAll=disabled
    BlockFileTypes=disabled
    BlockIpAccess=disabled
    Categories=test_category
    Description=Default filter
    Removable=no
    WhiteList=enabled
default_profile=profile
    Description=Default profile
    Filter=filter;default
    Removable=no
test_category=category
    Description=fsddf
    Domains=libero.it,repubblica.it
</pre>

	<p>squidguard.conf:<br /><pre>
.
.
.
    default {
        pass !test_category  whitelist  !blacklist  all
        redirect     http://192.168.56.115/cgi-bin/nethserver-block.cgi?clientaddr=%a&#38;clientname=%n&#38;clientident=%i&#38;srcclass=%s&#38;targetgroup=%t&#38;url=%u
    }
</pre></p>


<blockquote>

	<p>With this configuration, if a site is inside a blocked category and inside the whitelist, the site is still blocked. Should the whitelist always win? Even over custom categories?</p>


</blockquote>

	<p>I think the most intuitive and easy to use behavior is : the global whitelist always win, also over custom categories and global blacklist</p>


<blockquote>

	<p>I can't reproduce the problem. Have you used the latest package? Current web interface always displays hosts and users, no matter how the proxy is configured.</p>


</blockquote>

	<p>I don't know how but I didn't have the latest package, after upgraded now I can see the users and hosts on dropdown menu.</p></div>
    </div>
  </div>
  
  <div id="change-13645" class="journal has-notes has-details">
    <div id="note-25">
    <h4><a href="2958.html#note-25" class="journal-link">#25</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-13645-notes"><p>Implementation changed: now whitelist has priority over blacklist and custom categories.</p>


Package in nethserver-testing:
	<ul>
	<li>nethserver-squidguard-1.0.5-66.0git338d5945.ns6.noarch.rpm</li>
	</ul>


	<p>Please, repeat test case 4.</p></div>
    </div>
  </div>
  
  <div id="change-13680" class="journal has-details">
    <div id="note-26">
    <h4><a href="2958.html#note-26" class="journal-link">#26</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a201dd3970a9d5c2e86c7724ccdcdca0?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Assignee</strong> set to <i>Giovanni Bezicheri</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13684" class="journal has-details">
    <div id="note-27">
    <h4><a href="2958.html#note-27" class="journal-link">#27</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a201dd3970a9d5c2e86c7724ccdcdca0?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>TRIAGED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giovanni Bezicheri</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>20</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13685" class="journal has-notes">
    <div id="note-28">
    <h4><a href="2958.html#note-28" class="journal-link">#28</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a201dd3970a9d5c2e86c7724ccdcdca0?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-13685-notes"><p>The web content filter does not block domains specified in custom categories for custom filters (not default).</p></div>
    </div>
  </div>
  
  <div id="change-13686" class="journal has-details">
    <div id="note-29">
    <h4><a href="2958.html#note-29" class="journal-link">#29</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13687" class="journal has-notes has-details">
    <div id="note-30">
    <h4><a href="2958.html#note-30" class="journal-link">#30</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-13687-notes"><p>The problem should now be fixed.</p></div>
    </div>
  </div>
  
  <div id="change-13688" class="journal has-notes has-details">
    <div id="note-31">
    <h4><a href="2958.html#note-31" class="journal-link">#31</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-13688-notes">Package in nethserver-testing:
	<ul>
	<li>nethserver-squidguard-1.0.5-67.0git7224113f.ns6.noarch.rpm</li>
	</ul>


	<p>Again, repeat test case 4.</p></div>
    </div>
  </div>
  
  <div id="change-13706" class="journal has-details">
    <div id="note-32">
    <h4><a href="2958.html#note-32" class="journal-link">#32</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a201dd3970a9d5c2e86c7724ccdcdca0?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Assignee</strong> set to <i>Giovanni Bezicheri</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13707" class="journal has-details">
    <div id="note-33">
    <h4><a href="2958.html#note-33" class="journal-link">#33</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/a201dd3970a9d5c2e86c7724ccdcdca0?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giovanni Bezicheri</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-13748" class="journal has-notes has-details">
    <div id="note-34">
    <h4><a href="2958.html#note-34" class="journal-link">#34</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-13748-notes">Released in nethserver-updates:
	<ul>
	<li>nethserver-squidguard-1.1.0-1.ns6.noarch.rpm</li>
	</ul></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>





<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright &copy; 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
