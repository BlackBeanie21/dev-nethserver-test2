<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Feature #1126: Bandwidth Monitor (NTOP) - NethServer 6 - NethServer.org</title>
<meta name="description" content="Redmine" />
<meta name="keywords" content="issue,bug,tracker" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="xe6SsSoVbaoZlAUezNss16xDC6ajg3P6jzWUrXbVg4A=" name="csrf-token" />
<link rel='shortcut icon' href='../favicon.ico%3F1457596383' />
<link href="../stylesheets/jquery/jquery-ui-1.9.2.css%3F1403512057.css" media="all" rel="stylesheet" type="text/css" />
<link href="../themes/nethserver/stylesheets/application.css%3F1403512057.css" media="all" rel="stylesheet" type="text/css" />

<script src="../javascripts/jquery-1.8.3-ui-1.9.2-ujs-2.0.3.js%3F1403512056" type="text/javascript"></script>
<script src="../javascripts/application.js%3F1403512056" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
$(window).load(function(){ warnLeavingUnsaved('The current page contains unsaved text that will be lost if you leave this page.'); });
//]]>
</script>
<script src="../themes/nethserver/javascripts/theme.js%3F1403512057.js" type="text/javascript"></script>
<link href="../plugin_assets/openid_fix/stylesheets/openid.css%3F1403512057.css" media="screen" rel="stylesheet" type="text/css" />
<!-- page specific tags -->
    <link href="http://dev.nethserver.org/issues/1126.atom" rel="alternate" title="NethServer 6 - Feature #1126: Bandwidth Monitor (NTOP)" type="application/atom+xml" />
<script src="../javascripts/context_menu.js%3F1403512056" type="text/javascript"></script><link href="../stylesheets/context_menu.css%3F1403512057.css" media="screen" rel="stylesheet" type="text/css" /></head>
<body class="theme-Nethserver project-nethserver controller-issues action-show">
<div id="wrapper">
<div id="wrapper2">
<div id="wrapper3">
<div id="top-menu">
    
    <ul><li><a href="/index.html" class="home">Home</a></li>
<li><a href="/projects.html" class="projects">Projects</a></li></ul></div>
<div id="header">
    
<h1>NethServer 6</h1>

    <div id="main-menu">
        <ul><li><a href="/projects/nethserver" class="overview">Overview</a></li>

<li><a href="../issues.html" class="issues selected">Issues</a></li>
<li><a href="/projects/nethserver/wiki.html" class="wiki">Wiki</a></li></ul>
    </div>
</div>

<div id="main" class="">
    

    <div id="content">
        
        <div class="contextual">





</div>


<h2>Feature #1126</h2>

<div class="issue tracker-2 status-5 priority-4 priority-default closed parent details">

  <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/aedc12fdc56a99bdf3a6094a4b450a23?rating=PG&amp;size=50&amp;default=wavatar" ssl="false" title="" />

<div class="subject">
<div><h3>Bandwidth Monitor (NTOP)</h3></div>
</div>
        <p class="author">
        </p>

<table class="attributes">
<tr><th class="status">Status:</th><td class="status">CLOSED</td><th class="start-date">Start date:</th><td class="start-date"></td></tr><tr><th class="priority">Priority:</th><td class="priority">Normal</td><th class="due-date">Due date:</th><td class="due-date"></td></tr><tr><th class="assigned-to">Assignee:</th><td class="assigned-to">-</td><th class="progress">% Done:</th><td class="progress"><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent">100%</p></td></tr><tr><th class="category">Category:</th><td class="category">nethserver-ntopng</td><th></th><td></td></tr><tr><th class="fixed-version">Target version:</th><td class="fixed-version"><a href="../versions/157.html">v6.4-beta2</a></td><th></th><td></td></tr>
<tr>
	<th class="cf_13">Resolution:</th><td class="cf_13"></td>
	<th class="cf_14">NEEDINFO:</th><td class="cf_14">No</td>
</tr>


</table>

<hr />
<div class="description">
  <div class="contextual">
  
  </div>

  <p><strong>Description</strong></p>
  <div class="wiki">
  <p>Add tool for bandwith usage monitor.<br />Candidates: <a class="external" href="http://www.ubuntugeek.com/bandwidth-monitoring-tools-for-linux.html">http://www.ubuntugeek.com/bandwidth-monitoring-tools-for-linux.html</a></p>


	<p>Best option is Ntop.</p>


<pre>
yum install ntop
service ntop start
</pre>

	<p>Add ntop configuration to /etc/ntop.conf:<br /><pre>
# disable protocol decoders
-b
# don't resolve names
-n
# disable sessione tracking
-z
# disable promisc mode
-s
# track local hosts
-g

# local network configuration
-i eth0
-m 192.168.5.0/24

# try to fix *** glibc detected *** /usr/sbin/ntop: double free or corruption (fasttop):
# with sticky hosts
-c
</pre></p>


	<p>If someone prefers bandwidthd:<br /><pre>
yum install bandwidthd
service bandwidthd restart
</pre></p>


	<p>The web interface is accessible at <a class="external" href="http://server//bandwidthd">http://server//bandwidthd</a>.</p>
  </div>
</div>




<hr />
<div id="issue_tree">
<div class="contextual">
  
</div>
<p><strong>Subtasks</strong></p>
<form><table class="list issues"><tr class="issue issue-2090 hascontextmenu"><td class="checkbox"><input name="ids[]" type="checkbox" value="2090" /></td><td class="subject"><a href="2090.html" class="issue tracker-2 status-5 priority-4 priority-default closed child">Feature #2090</a>: Redis server</td><td>CLOSED</td><td></td><td><table class="progress progress-100" style="width: 80px;"><tr><td class="closed" style="width: 100%;"></td></tr></table><p class="percent"></p></td></tr></table></form>
</div>


</div>

<div id="issue-changesets">
<h3>Associated revisions</h3>
    <div class="changeset odd">
    <div class="wiki">
        <p>First import. Refs <a href="1126.html" class="issue tracker-2 status-5 priority-4 priority-default closed parent" title="Bandwidth Monitor (NTOP) (CLOSED)">#1126</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>translation: fix typo. Refs <a href="1126.html" class="issue tracker-2 status-5 priority-4 priority-default closed parent" title="Bandwidth Monitor (NTOP) (CLOSED)">#1126</a></p>
    </div>
    </div>
    <div class="changeset odd">
    <div class="wiki">
        <p>Updated translation for nethserver-bandwidth-monitor group. Refs <a href="1126.html" class="issue tracker-2 status-5 priority-4 priority-default closed parent" title="Bandwidth Monitor (NTOP) (CLOSED)">#1126</a></p>
    </div>
    </div>
    <div class="changeset even">
    <div class="wiki">
        <p>Add italian description for nethserver-bandwidth-monitor group. Refs <a href="1126.html" class="issue tracker-2 status-5 priority-4 priority-default closed parent" title="Bandwidth Monitor (NTOP) (CLOSED)">#1126</a></p>
    </div>
    </div>

</div>

<div id="history">
<h3>History</h3>
  <div id="change-3517" class="journal has-details">
    <div id="note-1">
    <h4><a href="1126.html#note-1" class="journal-link">#1</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Target version</strong> set to <i>~FUTURE</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-4208" class="journal has-details">
    <div id="note-2">
    <h4><a href="1126.html#note-2" class="journal-link">#2</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Project</strong> changed from <i>NethServer 6</i> to <i>92</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-4623" class="journal has-details">
    <div id="note-3">
    <h4><a href="1126.html#note-3" class="journal-link">#3</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Project</strong> changed from <i>92</i> to <i>NethServer 6</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-5217" class="journal has-details">
    <div id="note-4">
    <h4><a href="1126.html#note-4" class="journal-link">#4</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Assignee</strong> set to <i>Filippo Carletti</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6032" class="journal has-details">
    <div id="note-5">
    <h4><a href="1126.html#note-5" class="journal-link">#5</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Description</strong> updated (<a href="../journals/diff/6032%3Fdetail_id=8038.html" title="View differences">diff</a>)</li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6332" class="journal has-details">
    <div id="note-6">
    <h4><a href="1126.html#note-6" class="journal-link">#6</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/d1393faf88bfcbb0b41ce36307b6a143?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Target version</strong> changed from <i>~FUTURE</i> to <i>v6.4-beta2</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6774" class="journal has-notes has-details">
    <div id="note-7">
    <h4><a href="1126.html#note-7" class="journal-link">#7</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>NEW</i> to <i>TRIAGED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Filippo Carletti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>0</i> to <i>20</i></li>
    </ul>
    <div class="wiki" id="journal-6774-notes"><p>We go with the brand new ntopng.</p>


Repositories with rpm build:
	<ul>
	<li><a class="external" href="http://www.nmon.net/packages/rpm/x86_64/ntopng/">http://www.nmon.net/packages/rpm/x86_64/ntopng/</a></li>
	</ul>


	<p>This new release requires Redis as backend.</p>


	<p>We should create a proxypass to ntop http port using a random hash url.</p></div>
    </div>
  </div>
  
  <div id="change-6855" class="journal has-details">
    <div id="note-8">
    <h4><a href="1126.html#note-8" class="journal-link">#8</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Subject</strong> changed from <i>Bandwidth Monitor</i> to <i>Bandwidth Monitor (NTOP)</i></li>
       <li><strong>Status</strong> changed from <i>TRIAGED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> set to <i>Giacomo Sanchietti</i></li>
       <li><strong>% Done</strong> changed from <i>20</i> to <i>30</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6862" class="journal has-notes">
    <div id="note-10">
    <h4><a href="1126.html#note-10" class="journal-link">#10</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    <div class="wiki" id="journal-6862-notes">Dependencies:
	<ul>
	<li>GeoIP</li>
		<li>nethserver-redis</li>
	</ul></div>
    </div>
  </div>
  
  <div id="change-6883" class="journal has-notes has-details">
    <div id="note-11">
    <h4><a href="1126.html#note-11" class="journal-link">#11</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    <div class="wiki" id="journal-6883-notes">Problems encountered:
	<ul>
	<li>init script doesn't implement status actions, so we can't use standard action adjust-service; a custom action has been created to start and stop ntopng daemon</li>
		<li>despite official documentation, proxy pass with Apache doesn't correctly work</li>
	</ul>


	<p>After installation, ntopng is disabled by default. The user must access the web UI, choose an admin password and enable the service. Ntopng web interface is then accessible from the port specified in the web UI (default is 3000 with public access).</p></div>
    </div>
  </div>
  
  <div id="change-6884" class="journal has-notes has-details">
    <div id="note-12">
    <h4><a href="1126.html#note-12" class="journal-link">#12</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_DEV</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Giacomo Sanchietti</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>30</i></li>
    </ul>
    <div class="wiki" id="journal-6884-notes">New package in nethserver-testing:
	<ul>
	<li>nethserver-ntopng</li>
	</ul>


	<a name="Test-case"></a>
<h4 >Test case<a href="1126.html#Test-case" class="wiki-anchor">&para;</a></h4>


	<ul>
	<li>After package installation, enter the web UI under "Bandwidth monitor" section</li>
		<li>Enable the service and choose a password for the admin user</li>
		<li>Check ntopng is running on port 3000 gathering network statistics</li>
	</ul>


	<p>During starting process, ntopng will log these lines:<br /><pre>
Error Opening file /usr/local/share/ntopng/httpdocs/geoip/GeoIPASNum.dat
Error Opening file /usr/local/share/ntopng/httpdocs/geoip/GeoIPASNumv6.dat
Error Opening file /usr/local/share/ntopng/httpdocs/geoip/GeoLiteCity.dat
Error Opening file /usr/local/share/ntopng/httpdocs/geoip/GeoLiteCityv6.dat
</pre></p>


	<p>To avoid the errors, just execute <code>/etc/cron.monthly/ntop-update-geodb</code>.<br />This script will download required databases and restart ntopng daemon.</p></div>
    </div>
  </div>
  
  <div id="change-6885" class="journal has-details">
    <div id="note-13">
    <h4><a href="1126.html#note-13" class="journal-link">#13</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_DEV</i> to <i>MODIFIED</i></li>
       <li><strong>% Done</strong> changed from <i>30</i> to <i>60</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6886" class="journal has-notes has-details">
    <div id="note-14">
    <h4><a href="1126.html#note-14" class="journal-link">#14</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/557f8126150c57751ffc7d17a9f01e11?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>MODIFIED</i> to <i>ON_QA</i></li>
       <li><strong>% Done</strong> changed from <i>60</i> to <i>70</i></li>
    </ul>
    <div class="wiki" id="journal-6886-notes">New package in nethserver-testing:
	<ul>
	<li>nethserver-ntopng-1.0.1-1</li>
	</ul>


	<p>Changes:<br />- Fix typo in translations<br />- Also added new yum group <code>nethserver-bandwidth-monitor</code></p></div>
    </div>
  </div>
  
  <div id="change-6954" class="journal has-details">
    <div id="note-15">
    <h4><a href="1126.html#note-15" class="journal-link">#15</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Assignee</strong> set to <i>Davide Principi</i></li>
    </ul>
    
    </div>
  </div>
  
  <div id="change-6955" class="journal has-notes has-details">
    <div id="note-16">
    <h4><a href="1126.html#note-16" class="journal-link">#16</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>ON_QA</i> to <i>VERIFIED</i></li>
       <li><strong>Assignee</strong> deleted (<del><i>Davide Principi</i></del>)</li>
       <li><strong>% Done</strong> changed from <i>70</i> to <i>90</i></li>
    </ul>
    <div class="wiki" id="journal-6955-notes"><p><strong>VERIFIED</strong><br /><pre>
# rpm -qa | grep -F .ns6
nethserver-php-1.1.0-1.ns6.noarch
nethserver-smartd-1.0.0-1.ns6.noarch
nethserver-yum-1.1.1-1.ns6.noarch
postfix-2.9.6-2.ns6.x86_64
nethserver-base-1.4.0-12.0git855f8d09.ns6.noarch
nethserver-redis-1.0.0-1.ns6.noarch
nethserver-httpd-admin-1.0.4-1.ns6.noarch
nethserver-grub-1.0.1-1.ns6.noarch
nethserver-openssh-1.0.2-1.ns6.noarch
nethserver-lib-1.3.1-1.ns6.noarch
nethserver-ntp-1.0.4-1.ns6.noarch
nethserver-nethgui-1.2.2-1.ns6.noarch
nethserver-ntopng-1.0.1-1.ns6.noarch
</pre></p></div>
    </div>
  </div>
  
  <div id="change-7107" class="journal has-notes has-details">
    <div id="note-17">
    <h4><a href="1126.html#note-17" class="journal-link">#17</a>
    <img alt="" class="gravatar" default="wavatar" rating="PG" src="http://www.gravatar.com/avatar/ecb4e27446848579607dfdf7e161f7ef?rating=PG&amp;size=24&amp;default=wavatar" ssl="false" title="" />

    </h4><ul class="details">
       <li><strong>Status</strong> changed from <i>VERIFIED</i> to <i>CLOSED</i></li>
       <li><strong>% Done</strong> changed from <i>90</i> to <i>100</i></li>
    </ul>
    <div class="wiki" id="journal-7107-notes"><p>In nethserver-updates:<br />redis-2.4.10-1.el6.x86_64.rpm<br />nethserver-redis-1.0.0-1.ns6.noarch.rpm<br />nethserver-ntopng-1.0.1-1.ns6.noarch.rpm</p></div>
    </div>
  </div>
  


</div>


<div style="clear: both;"></div>
<div class="contextual">





</div>


<div style="clear: both;"></div>





<script type="text/javascript">
//<![CDATA[
contextMenuInit('/issues/context_menu')
//]]>
</script>

        
        <div style="clear:both;"></div>
    </div>
</div>
</div>

<div id="ajax-indicator" style="display:none;"><span>Loading...</span></div>
<div id="ajax-modal" style="display:none;"></div>

<div id="footer">
  <div class="bgl"><div class="bgr">
    Copyright &copy; 2012-2021 nethserver.org
  </div></div>
</div>
</div>
</div>

</body>
</html>
